<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undertale | Gogol Record</title>
    <link rel="stylesheet" href="stylesgame.css">
</head>
<body class="fade-out">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                document.body.classList.remove('fade-out');
            }, 50);
        });
    </script>
    <!-- Page transition overlay -->
    <div class="page-transition-overlay" id="pageTransition"></div>
    <div class="media-container">
        <div class="main-image-container" id="media-display">
            <img src="img/Undertale.png" alt="UNDERTALE Cover" id="cover-image">
            <div class="video-arrow" id="play-button"></div>
            <!-- YouTube trailer will be embedded here -->
        </div>
        <div class="info-panel">
            <div class="info-label">Développeur</div>
            <div class="info-label-info">tobyfox</div>

            <div class="info-label" style="margin-top: var(--spacing-md);">Genre</div>
            <div class="info-label-info">RPG</div>

            <div class="info-label">Date de Sortie</div>
            <div class="info-label-info">15 Septembre 2015</div>

            <div class="info-label" style="margin-top: var(--spacing-md);">Mode de Jeu</div>
            <div class="info-label-info">Solo</div>
        </div>
    </div>
    
    <div class="title">UNDERTALE ! Le jeu RPG où vous n'avez pas à détruire qui que ce soit.  </div>
    
    <a href="#" class="download-button">Téléchargement</a>

    <!-- Added games button with absolute path -->
    <a href="/games.html" class="games-button"> ← Autres Jeux</a>

    <div class="footer">
        © 2025 GOGOL RECORD
    </div>

    <!-- YouTube API -->
    <script src="https://www.youtube.com/iframe_api"></script>
    
    <script>
        // Variable to hold the YouTube player
        let player;
        
        // Function called by the YouTube API once it's ready
        function onYouTubeIframeAPIReady() {
            // This function will be available once the button is clicked and player is created
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const mediaDisplay = document.getElementById('media-display');
            const coverImage = document.getElementById('cover-image');
            const playButton = document.getElementById('play-button');
            const videoId = '1Hojv0m3TqA'; // The video ID from your YouTube URL
            
            // Create a div for the YouTube player
            const playerDiv = document.createElement('div');
            playerDiv.id = 'youtube-player';
            playerDiv.style.width = '100%';
            playerDiv.style.height = '100%';
            playerDiv.style.display = 'none';
            mediaDisplay.appendChild(playerDiv);
            
            playButton.addEventListener('click', function() {
                // Hide the image and play button
                coverImage.style.display = 'none';
                playButton.style.display = 'none';
                playerDiv.style.display = 'block';
                
                // Create the YouTube player
                player = new YT.Player('youtube-player', {
                    videoId: videoId,
                    playerVars: {
                        'autoplay': 1,
                        'controls': 1,
                        'rel': 0,
                        'modestbranding': 1
                    },
                    events: {
                        'onStateChange': onPlayerStateChange
                    }
                });
            });
            
            // Function to handle player state changes
            function onPlayerStateChange(event) {
                // State 0 is when the video ends
                if (event.data === 0) {
                    // Video ended, restore the image and play button
                    playerDiv.style.display = 'none';
                    coverImage.style.display = 'block';
                    playButton.style.display = 'flex';
                    
                    // Destroy the player to free resources and prepare for next play
                    player.destroy();
                    
                    // Recreate the player div for next use
                    const newPlayerDiv = document.createElement('div');
                    newPlayerDiv.id = 'youtube-player';
                    newPlayerDiv.style.width = '100%';
                    newPlayerDiv.style.height = '100%';
                    newPlayerDiv.style.display = 'none';
                    mediaDisplay.appendChild(newPlayerDiv);
                }
            }
        });

        // Fade in the page when it loads
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                document.body.classList.remove('fade-out');
            }, 50);
        });
        
        console.log('Game website loaded!');
        
        // Add click event listeners to all page links
        const pageLinks = document.querySelectorAll('.page-link');
        pageLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                const href = this.getAttribute('href');
                
                // Only apply transition if it's a valid link (not #)
                if (href && !href.startsWith('#')) {
                    e.preventDefault();
                    
                    // Show the transition overlay
                    const overlay = document.getElementById('pageTransition');
                    overlay.classList.add('active');
                    
                    // Wait for the animation to complete before navigating
                    setTimeout(function() {
                        window.location.href = href;
                    }, 500); // Match the transition duration
                }
            });
        });
    </script>
</body>
</html>